--><!doctype html>

<html lang="en">
  <head>
  	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>SirriYH</title>
<style>
         body {
      background-image: url('https://i.postimg.cc/Kcf1WWXz/20251103-163123.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      font-family: Arial, sans-serif;
      color: white;
      text-align: center;
      height: 100vh;
      margin: 0;
    }

    /* üîò ÿ≠ÿßŸàŸäÿ© ÿßŸÑŸÖŸàŸÇÿπ */
    .container {
      background-color: rgba(0, 0, 0, 0.5);
      padding: 20px;
      border-radius: 20px;
      width: 90%;
      max-width: 600px;
      margin: 80px auto;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
    }

    h1 {
      font-size: 28px;
      margin-bottom: 10px;
      color: #fff;
    }

    textarea {
      width: 100%;
      height: 120px;
      border-radius: 10px;
      border: none;
      padding: 10px;
      font-size: 16px;
      resize: none;
      margin-bottom: 10px;
    }

    button {
      background-color: #ff004c;
      border: none;
      padding: 12px 20px;
      color: white;
      font-size: 16px;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background-color: #ff3369;
    }

    .confession {
      background-color: rgba(255, 255, 255, 0.1);
      padding: 10px;
      margin-top: 10px;
      border-radius: 10px;
      color: #fff;
      text-align: left;
      font-size: 15px;
     

</style>
  </head>
  <body>
	<div class="wrap">
	  <header>
		<div class="logo">S</div>
		<div>
		  <h1>SirriYH</h1>
		  <p class="lead">Share secrets, read other people's confessions, react and support ‚Äî all anonymously.</p>
		</div>
	  </header><div class="grid">
		<div>
		  <div class="card">
			<form id="confess-form">
			  <div class="row">
				<select id="category" required>
				  <option value="general">General</option>
				  <option value="love">Love</option>
				  <option value="regret">Regret</option>
				  <option value="funny">Funny</option>
				  <option value="secret">Secret</option>
				  <option value="other">Other</option>
				</select>
				<input id="tagline" type="text" placeholder="Short title (optional)" />
			  </div>
			  <textarea id="content" placeholder="Write your confession... (be honest, stay respectful)" required maxlength="1200"></textarea>
			  <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
				<div class="muted">Max 1200 characters ‚Ä¢ Completely anonymous</div>
				<div style="display:flex;gap:8px">
				  <button type="button" class="btn" id="clear-btn">Clear</button>
				  <button class="btn" type="submit">Publish</button>
				</div>
			  </div>
			</form>
		  </div>

		  <div class="card" style="margin-top:12px">
			<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
			  <div class="small">Explore confessions</div>
			  <div class="small muted">Local-only demo (no server)</div>
			</div>

			<div class="controls">
			  <select id="filter-cat">
				<option value="all">All categories</option>
				<option value="love">Love</option>
				<option value="regret">Regret</option>
				<option value="funny">Funny</option>
				<option value="secret">Secret</option>
				<option value="other">Other</option>
			  </select>

			  <select id="sort-by">
				<option value="newest">Newest</option>
				<option value="most">Most reacted</option>
			  </select>

			  <button id="seed" class="react-btn">Seed demo</button>
			  <div style="flex:1"></div>
			  <button id="clear-all" class="react-btn">Clear all</button>
			</div>

			<div id="list" class="conf-list"></div>
		  </div>

		</div>

		<aside>
		  <div class="card">
			<h3 style="margin-top:0">Why SirriYH?</h3>
			<p class="muted">People need a safe, anonymous place to share. This demo stores everything locally on your device. If you want a shared live site, I can add a backend (Node or Firebase) so confessions are visible to everyone.</p>
			<hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0">
			<div class="small">Features included:</div>
			<ul class="small muted">
			  <li>Anonymous IDs (e.g., Anonymous #102)</li>
			  <li>Categories, sorting, reactions, comments</li>
			  <li>LocalStorage persistence</li>
			  <li>Input sanitization</li>
			   <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:20px 0">
			  <h3 style="margin-top:0">Developer</h3>
			  <a class="button" href="https://www.facebook.com/profile.php?id=100081943797415">ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß</a>
			</ul>
		  </div>
		</aside>
	  </div>

	  <footer>
		Built with care ‚Ä¢ Demo version stored locally on this device
	  </footer>

</div>  <script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              /* --- Utilities --- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const $ = (sel, ctx=document) => ctx.querySelector(sel);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const escapeHTML = (str) => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if(!str) return '';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  return str.replace(/[&<>"'`]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','`':'&#96;'})[c]);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          /* --- Storage keys and helpers --- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              const STORAGE_KEY = 'sirri_confessions_v1';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const load = ()=> JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const save = arr => localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          /* --- ID generator for anonymous numbers --- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              function nextAnonId(list){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const max = list.reduce((m,i)=>Math.max(m, i.anonId || 0), 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          return max + 1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  /* --- App state --- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      let confessions = load();

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          /* --- DOM refs --- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              const form = $('#confess-form');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const contentEl = $('#content');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const tagEl = $('#tagline');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const catEl = $('#category');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              const listEl = $('#list');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const filterCat = $('#filter-cat');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const sortBy = $('#sort-by');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const clearAllBtn = $('#clear-all');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              const seedBtn = $('#seed');

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  /* --- Rendering --- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      function render(){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            // Apply filter
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  let items = [...confessions];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const fq = filterCat.value;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if(fq !== 'all') items = items.filter(i => i.category === fq);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // Apply sort
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if(sortBy.value === 'newest') items.sort((a,b)=>b.createdAt - a.createdAt);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                else items.sort((a,b)=> (b.reactions.support + b.reactions.wow) - (a.reactions.support + a.reactions.wow));

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      listEl.innerHTML = items.map(i => renderItem(i)).join('');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              function renderItem(i){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const id = escapeHTML(String(i.anonId));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const title = escapeHTML(i.title || '');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const content = escapeHTML(i.content);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const cat = escapeHTML(i.category);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const time = new Date(i.createdAt).toLocaleString();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const support = i.reactions.support || 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const wow = i.reactions.wow || 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              const comments = (i.comments || []).map(c=>`<div class="comment">${escapeHTML(c)}</div>`).join('');

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    return `
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <div class="conf-item" data-id="${i.id}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <div class="conf-meta">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <div><span class="anon">Anonymous #${id}</span> <span class="muted">‚Ä¢ ${time}</span></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <div class="tag">${cat}${title? ' ‚Ä¢ '+title: ''}</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <div class="text">${content}</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <div style="display:flex;justify-content:space-between;align-items:center">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <div class="reactions">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <button class="react-btn" data-act="support" data-id="${i.id}">ü§ù Support <strong>(${support})</strong></button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <button class="react-btn" data-act="wow" data-id="${i.id}">üòÆ Wow <strong>(${wow})</strong></button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <button class="react-btn" data-act="commentToggle" data-id="${i.id}">üí¨ Comment</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <div style="font-size:12px;color:var(--muted)">ID:${i.id.slice(0,8)}</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <div class="comments" id="comments-${i.id}" style="display:none">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <div style="display:flex;gap:8px;margin-top:8px">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <input placeholder="Write anonymous comment..." style="flex:1;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);" data-cinput="${i.id}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <button class="react-btn" data-act="postComment" data-id="${i.id}">Post</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <div style="margin-top:8px">${comments}</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      `;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              /* --- Events --- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  form.addEventListener('submit', e =>{
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        e.preventDefault();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              const text = contentEl.value.trim();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if(!text) return alert('Please write something before publishing.');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const newConf = {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  id: cryptoRandomId(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          anonId: nextAnonId(confessions),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  title: tagEl.value.trim() || null,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          content: text,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  category: catEl.value,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          reactions: { support:0, wow:0 },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  comments: [],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          createdAt: Date.now()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                };
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      confessions.push(newConf);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            save(confessions);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  contentEl.value = '';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        tagEl.value = '';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              render();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      clearAllBtn.addEventListener('click', ()=>{
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if(!confirm('Clear ALL local confessions? This cannot be undone.')) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  confessions = [];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        save(confessions);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              render();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      seedBtn.addEventListener('click', ()=>{
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const demo = [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    {id:cryptoRandomId(), anonId:1, title:'Crush', content:'I still dream about my old classmate every week.', category:'love', reactions:{support:3,wow:1}, comments:['Tell them!','You are not alone'], createdAt:Date.now()-1000*60*60},
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            {id:cryptoRandomId(), anonId:2, title:'Oops', content:'I once pretended to be sick to skip an exam and got caught.', category:'funny', reactions:{support:2,wow:5}, comments:[], createdAt:Date.now()-1000*60*60*3},
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        confessions = demo.concat(confessions);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              save(confessions);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    render();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            document.addEventListener('click', e=>{
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const btn = e.target.closest('[data-act]');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if(!btn) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              const act = btn.getAttribute('data-act');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const id = btn.getAttribute('data-id');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const idx = confessions.findIndex(c=>c.id===id);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if(idx===-1) return;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if(act === 'support'){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              confessions[idx].reactions.support = (confessions[idx].reactions.support||0)+1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      save(confessions); render();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }else if(act === 'wow'){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    confessions[idx].reactions.wow = (confessions[idx].reactions.wow||0)+1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            save(confessions); render();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }else if(act === 'commentToggle'){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const area = document.getElementById('comments-'+id);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if(area) area.style.display = area.style.display === 'none' ? 'block' : 'none';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }else if(act === 'postComment'){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const input = document.querySelector(`input[data-cinput='${id}']`);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if(!input) return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const text = input.value.trim();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if(!text) return alert('Comment cannot be empty');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                confessions[idx].comments = confessions[idx].comments || [];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        confessions[idx].comments.push(text);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                input.value = '';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        save(confessions); render();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      filterCat.addEventListener('change', render);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          sortBy.addEventListener('change', render);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              document.getElementById('clear-btn').addEventListener('click', ()=>{ contentEl.value=''; tagEl.value=''; });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  /* --- Helpers --- */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      function cryptoRandomId(){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            // Secure-ish id for client-only demo
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,c=>(c^crypto.getRandomValues(new Uint8Array(1))[0]&15>>c/4).toString(16));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          // Initial render
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              render();

</script></body>
</html>